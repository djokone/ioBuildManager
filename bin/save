#! /usr/bin/env node
var Io = require('iorizon-cli')
require('iorizon-cli/bin/lib/debugger')
var FM = require('../lib/FileManager.js')

let fs = require('fs')
let path = require('path')

let save = new Io()
// console.log(save.options.destination)
let Files = new FM({
  includes: save.options.include,
  destination: save.options.destination
})

Files.on('allMatched', () => {
  console.log(Files.includeFiles)
})
Files.copyIncludeFiles()
Files.on('copy', () => {
  console.log('copyyyyyyyyyy')
})
Files.on('successCopy', () => {
  console.log('copy finish !')
})
// let success = false

// let error = {}
// let existInCurrent = function (folder) {
//   return fs.existsSync(path.resolve(save.current.url, folder))
// }



// let getFiles = function () {
//   let glob = require("glob").Glob
//   let filesGlob = []
//   let options = {
//     cwd: save.current.url
//   }
//   for (let inc of save.options.include) {
//     console.log(inc)
//     filesGlob.push(new glob(inc, options, function (err, files) {
//       console.log(err)
//       console.log(files)
//     }))
//   }
// }


// if (!Array.isArray(save.options.folder) && existInCurrent(save.options.include)) {
//   success = true
// } else {
  
//   let inSuccess = true
//   for (let f of save.options.folder) {
//     if (!existInCurrent(f)) {
//       inSuccess = false
//       error[f] = path.normalize(path.resolve(save.current.url))
//     }
//   }
//   if (inSuccess) {
//     success = true
//   }
// }

// if (!success) {
//   for (let err in error) {
//     console.error(err + ' file doesn\'t exist in ' + error[err] + ' folder')
//   }
// }
// if (fs.existsSync(path.resolve(save.current.url, moduleBuildConf.folder))) {

// }
// console.log(save.current.modules.content[save.parentCmd[0]])